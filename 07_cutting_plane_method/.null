Starting two phase simplex solver with
A = 
     0    1    2    3    4    5
0  2.0 -1.0  1.0  1.0  0.0  0.0
1 -4.0  2.0 -1.0  0.0  1.0  0.0
2  3.0  0.0  1.0  0.0  0.0  1.0
b = 
[1. 2. 5.]
Converting all bs to positive, resulting in: 
A = 
     0    1    2    3    4    5
0  2.0 -1.0  1.0  1.0  0.0  0.0
1 -4.0  2.0 -1.0  0.0  1.0  0.0
2  3.0  0.0  1.0  0.0  0.0  1.0
b = 
[1. 2. 5.]
Starting preparation
After preparation we have:
A = 
     0    1    2    3    4    5
0  2.0 -1.0  1.0  1.0  0.0  0.0
1 -4.0  2.0 -1.0  0.0  1.0  0.0
2  3.0  0.0  1.0  0.0  0.0  1.0
b = 
[1. 2. 5.]
Basic indices: [3, 4, 5]
Artificial indices: []
Artificial row indices: []
We will now append the sub-problem objective function:
     0    1    2    3    4    5    6
0  2.0 -1.0  1.0  1.0  0.0  0.0  1.0
1 -4.0  2.0 -1.0  0.0  1.0  0.0  2.0
2  3.0  0.0  1.0  0.0  0.0  1.0  5.0
3  0.0  0.0  0.0  0.0  0.0  0.0  0.0
Now we eliminate artificial variables from objective function:
     0    1    2    3    4    5    6
0  2.0 -1.0  1.0  1.0  0.0  0.0  1.0
1 -4.0  2.0 -1.0  0.0  1.0  0.0  2.0
2  3.0  0.0  1.0  0.0  0.0  1.0  5.0
3  0.0  0.0  0.0  0.0  0.0  0.0  0.0
Now we send that to phase one simplex, along with basic indices being: 
[3, 4, 5]
Phase one simplex is good, and it gives us this tableau: 
     0    1    2    3    4    5    6
0  2.0 -1.0  1.0  1.0  0.0  0.0  1.0
1 -4.0  2.0 -1.0  0.0  1.0  0.0  2.0
2  3.0  0.0  1.0  0.0  0.0  1.0  5.0
3  0.0  0.0  0.0  0.0  0.0  0.0  0.0
With last basic indices being: [3 4 5]
Now we send it to cleanup
Starting matrix cleanup
Matrix: 
     0    1    2    3    4    5    6
0  2.0 -1.0  1.0  1.0  0.0  0.0  1.0
1 -4.0  2.0 -1.0  0.0  1.0  0.0  2.0
2  3.0  0.0  1.0  0.0  0.0  1.0  5.0
3  0.0  0.0  0.0  0.0  0.0  0.0  0.0
	basic indices: [3 4 5]
	artif indices: []
After removing columns [] we have
Matrix: 
     0    1    2    3    4    5    6
0  2.0 -1.0  1.0  1.0  0.0  0.0  1.0
1 -4.0  2.0 -1.0  0.0  1.0  0.0  2.0
2  3.0  0.0  1.0  0.0  0.0  1.0  5.0
3  0.0  0.0  0.0  0.0  0.0  0.0  0.0
	basic indices: [3 4 5]
	artif indices: []
No more artificial, so cleanup is done!
After cleanup our matrix is:
     0    1    2    3    4    5    6
0  2.0 -1.0  1.0  1.0  0.0  0.0  1.0
1 -4.0  2.0 -1.0  0.0  1.0  0.0  2.0
2  3.0  0.0  1.0  0.0  0.0  1.0  5.0
3  0.0  0.0  0.0  0.0  0.0  0.0  0.0
Now we just append our old target function
     0    1    2    3    4    5    6
0  2.0 -1.0  1.0  1.0  0.0  0.0  1.0
1 -4.0  2.0 -1.0  0.0  1.0  0.0  2.0
2  3.0  0.0  1.0  0.0  0.0  1.0  5.0
3  1.0 -1.0 -3.0  0.0  0.0  0.0  0.0
This matrix has basic columns: [3, 4, 5] and their rows [0, 1, 2]
We eliminate basic variables from objective function:
     0    1    2    3    4    5    6
0  2.0 -1.0  1.0  1.0  0.0  0.0  1.0
1 -4.0  2.0 -1.0  0.0  1.0  0.0  2.0
2  3.0  0.0  1.0  0.0  0.0  1.0  5.0
3  1.0 -1.0 -3.0  0.0  0.0  0.0  0.0
And off to simplex it goes!
Simplex last tableau: 
     0    1    2         3         4         5          6
0  0.0  0.0  1.0  2.000000  1.000000  0.000000   4.000000
1  0.0  1.0  0.0 -0.333333  0.333333  0.666667   3.666667
2  1.0  0.0  0.0 -0.666667 -0.333333  0.333333   0.333333
3  0.0  0.0  0.0  6.333333  3.666667  0.333333  15.333333
Basics being: [2, 1, 0]
And solution: 
[0.33333333 3.66666667 4.         0.         0.         0.        ]
========================================================================================================================================================================================================
Starting two phase simplex solver with
A = 
     0    1    2         3         4         5    6
0  0.0  0.0  1.0  2.000000  1.000000  0.000000  0.0
1  0.0  1.0  0.0 -0.333333  0.333333  0.666667  0.0
2  1.0  0.0  0.0 -0.666667 -0.333333  0.333333  0.0
3 -0.0 -0.0 -0.0 -0.666667 -0.333333 -0.666667  1.0
b = 
[ 4.          3.66666667  0.33333333 -0.66666667]
Converting all bs to positive, resulting in: 
A = 
     0    1    2         3         4         5    6
0  0.0  0.0  1.0  2.000000  1.000000  0.000000  0.0
1  0.0  1.0  0.0 -0.333333  0.333333  0.666667  0.0
2  1.0  0.0  0.0 -0.666667 -0.333333  0.333333  0.0
3  0.0  0.0  0.0  0.666667  0.333333  0.666667 -1.0
b = 
[4.         3.66666667 0.33333333 0.66666667]
Starting preparation
After preparation we have:
A = 
     0    1    2         3         4         5    6    7
0  0.0  0.0  1.0  2.000000  1.000000  0.000000  0.0  0.0
1  0.0  1.0  0.0 -0.333333  0.333333  0.666667  0.0  0.0
2  1.0  0.0  0.0 -0.666667 -0.333333  0.333333  0.0  0.0
3  0.0  0.0  0.0  0.666667  0.333333  0.666667 -1.0  1.0
b = 
[4.         3.66666667 0.33333333 0.66666667]
Basic indices: [0, 1, 2, 7]
Artificial indices: [7]
Artificial row indices: [3]
We will now append the sub-problem objective function:
     0    1    2         3         4         5    6    7         8
0  0.0  0.0  1.0  2.000000  1.000000  0.000000  0.0  0.0  4.000000
1  0.0  1.0  0.0 -0.333333  0.333333  0.666667  0.0  0.0  3.666667
2  1.0  0.0  0.0 -0.666667 -0.333333  0.333333  0.0  0.0  0.333333
3  0.0  0.0  0.0  0.666667  0.333333  0.666667 -1.0  1.0  0.666667
4  0.0  0.0  0.0  0.000000  0.000000  0.000000  0.0  1.0  0.000000
Now we eliminate artificial variables from objective function:
     0    1    2         3         4         5    6    7         8
0  0.0  0.0  1.0  2.000000  1.000000  0.000000  0.0  0.0  4.000000
1  0.0  1.0  0.0 -0.333333  0.333333  0.666667  0.0  0.0  3.666667
2  1.0  0.0  0.0 -0.666667 -0.333333  0.333333  0.0  0.0  0.333333
3  0.0  0.0  0.0  0.666667  0.333333  0.666667 -1.0  1.0  0.666667
4  0.0  0.0  0.0 -0.666667 -0.333333 -0.666667  1.0  0.0 -0.666667
Now we send that to phase one simplex, along with basic indices being: 
[0, 1, 2, 7]
Phase one simplex is good, and it gives us this tableau: 
     0    1    2    3    4    5    6    7    8
0  0.0  0.0  1.0  0.0  0.0 -2.0  3.0 -3.0  2.0
1  0.0  1.0  0.0  0.0  0.5  1.0 -0.5  0.5  4.0
2  1.0  0.0  0.0  0.0  0.0  1.0 -1.0  1.0  1.0
3  0.0  0.0  0.0  1.0  0.5  1.0 -1.5  1.5  1.0
4  0.0  0.0  0.0  0.0  0.0  0.0  0.0  1.0  0.0
With last basic indices being: [0, 1, 2, 3]
Now we send it to cleanup
Starting matrix cleanup
Matrix: 
     0    1    2    3    4    5    6    7    8
0  0.0  0.0  1.0  0.0  0.0 -2.0  3.0 -3.0  2.0
1  0.0  1.0  0.0  0.0  0.5  1.0 -0.5  0.5  4.0
2  1.0  0.0  0.0  0.0  0.0  1.0 -1.0  1.0  1.0
3  0.0  0.0  0.0  1.0  0.5  1.0 -1.5  1.5  1.0
4  0.0  0.0  0.0  0.0  0.0  0.0  0.0  1.0  0.0
	basic indices: [0, 1, 2, 3]
	artif indices: [7]
		Column 7 is artificial and not basic so we just schedule it for removal.
After removing columns [7] we have
Matrix: 
     0    1    2    3    4    5    6    7
0  0.0  0.0  1.0  0.0  0.0 -2.0  3.0  2.0
1  0.0  1.0  0.0  0.0  0.5  1.0 -0.5  4.0
2  1.0  0.0  0.0  0.0  0.0  1.0 -1.0  1.0
3  0.0  0.0  0.0  1.0  0.5  1.0 -1.5  1.0
4  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
	basic indices: [0, 1, 2, 3]
	artif indices: []
No more artificial, so cleanup is done!
After cleanup our matrix is:
     0    1    2    3    4    5    6    7
0  0.0  0.0  1.0  0.0  0.0 -2.0  3.0  2.0
1  0.0  1.0  0.0  0.0  0.5  1.0 -0.5  4.0
2  1.0  0.0  0.0  0.0  0.0  1.0 -1.0  1.0
3  0.0  0.0  0.0  1.0  0.5  1.0 -1.5  1.0
4  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
Now we just append our old target function
     0    1    2         3         4         5    6    7
0  0.0  0.0  1.0  0.000000  0.000000 -2.000000  3.0  2.0
1  0.0  1.0  0.0  0.000000  0.500000  1.000000 -0.5  4.0
2  1.0  0.0  0.0  0.000000  0.000000  1.000000 -1.0  1.0
3  0.0  0.0  0.0  1.000000  0.500000  1.000000 -1.5  1.0
4  0.0  0.0  0.0  6.333333  3.666667  0.333333  0.0  0.0
This matrix has basic columns: [0, 1, 2, 3] and their rows [2, 1, 0, 3]
We eliminate basic variables from objective function:
     0    1    2    3    4    5    6         7
0  0.0  0.0  1.0  0.0  0.0 -2.0  3.0  2.000000
1  0.0  1.0  0.0  0.0  0.5  1.0 -0.5  4.000000
2  1.0  0.0  0.0  0.0  0.0  1.0 -1.0  1.000000
3  0.0  0.0  0.0  1.0  0.5  1.0 -1.5  1.000000
4  0.0  0.0  0.0  0.0  0.5 -6.0  9.5 -6.333333
And off to simplex it goes!
Simplex last tableau: 
     0    1    2    3             4    5             6             7
0  0.0  0.0  1.0  2.0  1.000000e+00  0.0  4.440892e-16  4.000000e+00
1  0.0  1.0  0.0 -1.0  5.551115e-17  0.0  1.000000e+00  3.000000e+00
2  1.0  0.0  0.0 -1.0 -5.000000e-01  0.0  5.000000e-01  3.330669e-16
3  0.0  0.0  0.0  1.0  5.000000e-01  1.0 -1.500000e+00  1.000000e+00
4  0.0  0.0  0.0  6.0  3.500000e+00  0.0  5.000000e-01 -3.333333e-01
Basics being: [0, 1, 2, 5]
And solution: 
[3.33066907e-16 3.00000000e+00 4.00000000e+00 0.00000000e+00
 0.00000000e+00 1.00000000e+00 0.00000000e+00]
========================================================================================================================================================================================================
